<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <h2>–ê–Ω–∞–ª–∏–∑ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –∑–∞ {{ days }} –¥–Ω–µ–π</h2>

  <h3>–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã:</h3>
  <table border="1" cellpadding="5">
    <tr>
      <th>–ú–æ–Ω–µ—Ç–∞</th>
      <th>–°—Ä–µ–¥–Ω—è—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (–ø—É–Ω–∫—Ç—ã)</th>
      <th>–°—Ä–µ–¥–Ω—è—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (%)</th>
    </tr>
    {% for row in crypto_results %}
    <tr>
      <td>{{ row.symbol }}</td>
      <td>{{ row.average_volatility_points }}</td>
      <td>{{ row.average_volatility_percent }}</td>
    </tr>
    {% endfor %}
  </table>
  <h3>üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</h3>
{% for coin, table in zip(crypto_results, crypto_tables) %}
  <h4>{{ coin.symbol }}</h4>
  <table border="1" cellpadding="5">
    <tr>
      <th>–î–∞—Ç–∞</th>
      <th>–ü—É–Ω–∫—Ç—ã</th>
      <th>–ò–∑–º–µ–Ω–µ–Ω–∏–µ (%)</th>
    </tr>
    {% for row in table %}
    <tr>
      <td>{{ row.date }}</td>
      <td>{{ row.points }}</td>
      <td>{{ row.percent_change }}</td>
    </tr>
    {% endfor %}
  </table>
  <br>
{% endfor %}

<h4>S&P500</h4>
<table border="1" cellpadding="5">
  <tr>
    <th>–î–∞—Ç–∞</th>
    <th>–ü—É–Ω–∫—Ç—ã</th>
    <th>–ò–∑–º–µ–Ω–µ–Ω–∏–µ (%)</th>
  </tr>
  {% for row in sp500_table %}
  <tr>
    <td>{{ row.date }}</td>
    <td>{{ row.points }}</td>
    <td>{{ row.percent_change }}</td>
  </tr>
  {% endfor %}
</table>

  <h3>S&P 500:</h3>
  <table border="1" cellpadding="5">
    <tr>
      <th>–ò–Ω–¥–µ–∫—Å</th>
      <th>–°—Ä–µ–¥–Ω—è—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (–ø—É–Ω–∫—Ç—ã)</th>
      <th>–°—Ä–µ–¥–Ω—è—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (%)</th>
    </tr>
    <tr>
      <td>{{ sp500_result.symbol }}</td>
      <td>{{ sp500_result.average_volatility_points }}</td>
      <td>{{ sp500_result.average_volatility_percent }}</td>
    </tr>
  </table>

  <br>
  <a href="{{ report_url }}" download>üì• –°–∫–∞—á–∞—Ç—å PDF-–æ—Ç—á—ë—Ç</a><br><br>
  <a href="/">üîô –ù–∞–∑–∞–¥</a>

  <h3>üìà –ì—Ä–∞—Ñ–∏–∫ –¥–Ω–µ–≤–Ω–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏</h3>
  <div id="volatility-plot" style="width: 100%; height: 500px;"></div>

  {% if plot_data %}
  <script>
    const plotData = {{ plot_data | safe }};
    Plotly.newPlot('volatility-plot', plotData, {
      title: '–ì—Ä–∞—Ñ–∏–∫ –¥–Ω–µ–≤–Ω–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏',
      xaxis: { title: '–î–∞—Ç–∞' },
      yaxis: { title: '–ò–∑–º–µ–Ω–µ–Ω–∏–µ (%)' }
    });
  </script>
  {% else %}
  <p style="color: red;">‚ö†Ô∏è –ì—Ä–∞—Ñ–∏–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–æ–±—Ä–∞–∂—ë–Ω ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –¥–∞–Ω–Ω—ã–µ.</p>
  {% endif %}
</body>
</html>

